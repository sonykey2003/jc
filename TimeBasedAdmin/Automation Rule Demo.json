{
    "cloud": true,
    "rules": [
        {
            "id": 19118370,
            "clientKey": "c3d15de2-6efe-3c6f-bba9-ae6f15b19a03",
            "name": "Request Time Based Admin Privilege V2",
            "state": "ENABLED",
            "description": "",
            "authorAccountId": "5f02b1cd4c7d53001a696ed7",
            "actor": {
                "type": "ACCOUNT_ID",
                "value": "557058:f58131cb-b67d-43c7-b30d-6b58d40bd077"
            },
            "created": 1714374257047,
            "updated": 1714374257047,
            "trigger": {
                "id": "443189381",
                "component": "TRIGGER",
                "parentId": null,
                "conditionParentId": null,
                "schemaVersion": 1,
                "type": "jira.issue.event.trigger:created",
                "value": {
                    "eventKey": "jira:issue_created",
                    "issueEvent": "issue_created"
                },
                "children": [],
                "conditions": [],
                "connectionId": null
            },
            "components": [
                {
                    "id": "443189382",
                    "component": "ACTION",
                    "parentId": null,
                    "conditionParentId": null,
                    "schemaVersion": 1,
                    "type": "jira.issue.outgoing.webhook",
                    "value": {
                        "url": "https://console.jumpcloud.com/api/systemusers?filter=email:$eq:{{issue.reporter.emailAddress}}",
                        "headers": [
                            {
                                "id": "_header_1714374101440",
                                "name": "x-api-key",
                                "value": "your-read-only-api-key",
                                "headerSecure": false
                            }
                        ],
                        "sendIssue": false,
                        "contentType": "empty",
                        "customBody": null,
                        "method": "GET",
                        "responseEnabled": true,
                        "continueOnErrorEnabled": false
                    },
                    "children": [],
                    "conditions": [],
                    "connectionId": null
                },
                {
                    "id": "443189383",
                    "component": "ACTION",
                    "parentId": null,
                    "conditionParentId": null,
                    "schemaVersion": 1,
                    "type": "jira.create.variable",
                    "value": {
                        "id": "_customsmartvalue_id_1714374125936",
                        "name": {
                            "type": "FREE",
                            "value": "userid"
                        },
                        "type": "SMART",
                        "query": {
                            "type": "SMART",
                            "value": "{{webResponse.body.results.id}}"
                        },
                        "lazy": false
                    },
                    "children": [],
                    "conditions": [],
                    "connectionId": null
                },
                {
                    "id": "443189384",
                    "component": "ACTION",
                    "parentId": null,
                    "conditionParentId": null,
                    "schemaVersion": 1,
                    "type": "jira.issue.outgoing.webhook",
                    "value": {
                        "url": "https://console.jumpcloud.com/api/v2/users/{{webResponse.body.results.id}}/systems",
                        "headers": [
                            {
                                "id": "_header_1714374138382",
                                "name": "x-api-key",
                                "value": "your-read-write-api-key",
                                "headerSecure": false
                            }
                        ],
                        "sendIssue": false,
                        "contentType": "empty",
                        "customBody": null,
                        "method": "GET",
                        "responseEnabled": true,
                        "continueOnErrorEnabled": false
                    },
                    "children": [],
                    "conditions": [],
                    "connectionId": null
                },
                {
                    "id": "443189385",
                    "component": "BRANCH",
                    "parentId": null,
                    "conditionParentId": null,
                    "schemaVersion": 1,
                    "type": "jira.smart.values.branch",
                    "value": {
                        "id": "_customsmartvalue_id_1714374163215",
                        "name": {
                            "type": "FREE",
                            "value": "systems"
                        },
                        "type": "SMART",
                        "query": {
                            "type": "SMART",
                            "value": "{{webResponse.body}}"
                        },
                        "lazy": false
                    },
                    "children": [
                        {
                            "id": "443189386",
                            "component": "ACTION",
                            "parentId": "443189385",
                            "conditionParentId": null,
                            "schemaVersion": 1,
                            "type": "jira.issue.comment",
                            "value": {
                                "comment": "user is {{userid}}\n\nTime: {{now.plusMinutes(issue.expiry).format(\"yyyy-MM-dd'T'HH:mm:ss'Z'\")}}\n\nSystem is {{systems.id}}",
                                "publicComment": false,
                                "commentVisibility": null,
                                "sendNotifications": true,
                                "addCommentOnce": true
                            },
                            "children": [],
                            "conditions": [],
                            "connectionId": null
                        },
                        {
                            "id": "443189387",
                            "component": "ACTION",
                            "parentId": "443189385",
                            "conditionParentId": null,
                            "schemaVersion": 1,
                            "type": "jira.issue.outgoing.webhook",
                            "value": {
                                "url": "https://console.jumpcloud.com/api/v2/accessrequests",
                                "headers": [
                                    {
                                        "id": "_header_1714374198372",
                                        "name": "x-api-key",
                                        "value": "your-read-write-api-key",
                                        "headerSecure": false
                                    }
                                ],
                                "sendIssue": false,
                                "contentType": "custom",
                                "customBody": "{\n    \"expiry\":\"{{now.plusMinutes(issue.expiry).format(\"yyyy-MM-dd'T'HH:mm:ss'Z'\")}}\",\n    \"requestorId\": \"{{userid}}\",\n    \"operationId\": \"ff487bda-e18f-42ed-9d6c-5c7cafd6adf9\",\n    \"resourceId\": \"{{systems.id}}\",\n    \"resourceType\": \"device\",\n    \"additionalAttributes\": {\n        \"sudo\": {\n        \"enabled\": true,\n        \"withoutPassword\": false\n        }\n    }\n\n}",
                                "method": "POST",
                                "responseEnabled": false,
                                "continueOnErrorEnabled": false
                            },
                            "children": [],
                            "conditions": [],
                            "connectionId": null
                        },
                        {
                            "id": "443189388",
                            "component": "ACTION",
                            "parentId": "443189385",
                            "conditionParentId": null,
                            "schemaVersion": 1,
                            "type": "jira.issue.comment",
                            "value": {
                                "comment": "{{systems.id}} sudo is not enabled:\n\nSudo is granted for {{issue.expiry}} mins for user {{issue.reporter.emailAddress}}, JumpCloud user id: {{userid}}",
                                "publicComment": false,
                                "commentVisibility": null,
                                "sendNotifications": true,
                                "addCommentOnce": true
                            },
                            "children": [],
                            "conditions": [],
                            "connectionId": null
                        }
                    ],
                    "conditions": [],
                    "connectionId": null
                }
            ],
            "canOtherRuleTrigger": false,
            "notifyOnError": "FIRSTERROR",
            "projects": [],
            "labels": [],
            "tags": [],
            "ruleScope": {
                "resources": [
                    "ari:cloud:jira:de831141-5421-4977-b7be-6d0833a6eb0d:project/10001"
                ]
            },
            "ruleHome": {
                "ruleLifecycleHome": {
                    "locationARI": "ari:cloud:jira:de831141-5421-4977-b7be-6d0833a6eb0d:project/10001"
                },
                "ruleBillingHome": {
                    "locationARI": "ari:cloud:jira-software::site/de831141-5421-4977-b7be-6d0833a6eb0d"
                }
            },
            "writeAccessType": "UNRESTRICTED",
            "collaborators": [],
            "billingType": "NORMAL"
        }
    ]
}